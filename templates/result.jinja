{% extends "base.jinja" %}
{% block content %}
    <div class="row">
      {% if context.state == 'error' %}
      <h3>Error...</h3>
      <p>{{ context.error }}</p>

      {% elif context.state == 'waiting' %}

      <h3>Still checking!</h3>
      <p>You can bookmark this page or wait a while and it will reload when it is ready.</p>
        {% if context.index > 1 %}
      <p>You're number {{ context.index }} in the queue...</p>
        {% endif %}

      {% elif context.state == 'processed' %}

      <h3>Your results...</h3>
      Males: {{ context.male }}
      Females: {{ context.female }}
      State: {{ context.state }}
      ID: {{ context.playlist_id }}
      User: {{ context.username }}

      {% elif context.state == 'failed' %}

      <h3>Failed...</h3>
      <p>Looks like we couldn't contact Spotify for some reason, or it timed out...</p>

      {% endif %}
      <div class="debug">
        {{ context }}
      </div>
    </div>
{% endblock %}
{% block scripts %}
  <script type="text/javascript">
  {% if context.state != 'processed' %}
    setTimeout(function() { location.reload(); }, 30000);
  {% endif %}
  </script>
{% endblock %}
